(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[354],{"../node_modules/@oroinc/oro-webpack-config-builder/loader/text-loader.js!./bundles/orodotmailer/templates/field-choice-item.html":t=>{t.exports='<div class="field-row">\n    <input type="hidden">\n    <button class="btn btn-icon btn-square-light remove-item" type="button" data-role="remove-item" aria-label="<%- _.__(\'Remove row\') %>">\n        <span class="fa-trash-o" aria-hidden="true"></span>\n    </button>\n</div>\n'},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orodatagrid/templates/board/card-view.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<span>\n    Generic card\n    ",console&&console.warn&&console.warn("Please configure `card_view` in datagrid board configuration"),__p+="\n</span>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orosales/templates/board/opportunity-card-view.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="card-actions" data-placeholder-for="actions"></div>\n<div class="card-title"><a href="'+(null==(__t=view_link)?"":_.escape(__t))+'" data-action="navigate" title="'+(null==(__t=name)?"":_.escape(__t))+'">'+(null==(__t=name)?"":_.escape(__t))+'</a></div>\n<div class="card-amount">',null!==budgetAmount?__p+=""+(null==(__t=numberFormatter.formatCurrency(budgetAmount,budgetCurrency))?"":_.escape(__t)):__p+="&nbsp;",__p+='</div>\n<div class="card-probability">',null!==probability?__p+=""+(null==(__t=numberFormatter.formatPercent(probability))?"":_.escape(__t)):__p+="&nbsp;",__p+='</div>\n<div class="card-additional">\n    <div class="card-additional-line">',accountName?__p+=""+(null==(__t=accountName)?"":_.escape(__t)):__p+="&nbsp;",__p+='</div>\n    <div class="card-additional-line">',contactName?__p+=""+(null==(__t=contactName)?"":_.escape(__t)):__p+="&nbsp;",__p+='</div>\n</div>\n<div class="card-date">'+(null==(__t=datetimeFormatter.formatDate(updatedAt))?"":_.escape(__t))+"</div>\n";return __p}},"./bundles/orodatagrid/js/app/views/board/card-view.js":(t,e,i)=>{var n;void 0===(n=function(t){"use strict";const e=i("./bundles/oroui/js/app/views/base/view.js"),n=i("./bundles/orolocale/js/formatter/number.js"),s=i("./bundles/orolocale/js/formatter/datetime.js"),o=i("./bundles/oroui/js/tools/scroll-helper.js"),a=i("./bundles/orodatagrid/js/app/views/grid/actions-view.js"),r=e.extend({className:"card-view",cardActionsElementSelector:'[data-placeholder-for="actions"]',template:i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orodatagrid/templates/board/card-view.html"),keepElement:!1,earlyTransitionStatusChangeTimeout:2e3,events:{'click [data-action="navigate"]':"navigate"},listen:{"change model":"render"},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){r.__super__.initialize.call(this,t),this.readonly=t.readonly,this.datagrid=t.datagrid,this.actions=t.actions,this.actionOptions=t.actionOptions,t.earlyTransitionStatusChangeTimeout&&(this.earlyTransitionStatusChangeTimeout=t.earlyTransitionStatusChangeTimeout)},getTemplateData:function(){const t=r.__super__.getTemplateData.call(this);return t.numberFormatter=n,t.datetimeFormatter=s,t.readonly=this.readonly,t},render:function(){r.__super__.render.call(this),this.$el.attr({"data-transition-status":this.model.get("transitionStatus"),"data-readonly":this.readonly}),this.trackErrorTransitionStatus(),this.trackEarlyTransitionStatusChange(),this.model?(this.$el.removeAttr("data-non-valid"),this.$el.data({model:this.model})):this.$el.attr("data-non-valid",""),this.renderCardActionsDropdown(this.cardActionsElementSelector)},trackErrorTransitionStatus:function(){"error"===this.model.get("transitionStatus")?this.scrolledToErrorCard||(o.scrollIntoView(this.el,void 0,20,20),this.scrolledToErrorCard=!0):delete this.scrolledToErrorCard},trackEarlyTransitionStatusChange:function(){const t=this.$el;if(t.removeClass("transition-status-just-changed"),clearTimeout(this.transitionStatusUpdateTimeout),!this.model.get("transitionStatusUpdateTime"))return;const e=(new Date).getTime(),i=this.model.get("transitionStatusUpdateTime").getTime(),n=this.earlyTransitionStatusChangeTimeout-(e-i);n>0&&(t.addClass("transition-status-just-changed"),this.transitionStatusUpdateTimeout=setTimeout((function(){t.removeClass("transition-status-just-changed")}),n))},navigate:function(t){t.preventDefault(),this.trigger("navigate",this.model,{doExecute:!0})},renderCardActionsDropdown:function(t){const e=this.$(t);e.length&&(this.cardActionsView?this.cardActionsView.setElement(e):this.cardActionsView=new a({el:e,actions:this.actions,model:this.model,actionConfiguration:this.model.get("action_configuration"),datagrid:this.datagrid,actionOptions:this.actionOptions,showCloseButton:!1}),this.cardActionsView.render())}});return r}.call(e,i,e,t))||(t.exports=n)},"./bundles/orodatagrid/js/app/views/grid/actions-view.js":(t,e,i)=>{var n;void 0===(n=function(t){"use strict";const e=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/orotranslation/js/translator.js"),o=i("./bundles/oroui/js/app/views/base/view.js").extend({actions:void 0,actionsHideCount:3,launchers:void 0,showCloseButton:!1,baseMarkup:n.template('<div class="more-bar-holder"><div class="dropleft"><a class="dropdown-toggle" href="#" role="button" id="<%- togglerId %>" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="<%- label %>"><span class="icon fa-ellipsis-h" aria-hidden="true"></span></a><ul class="dropdown-menu dropdown-menu__action-cell launchers-dropdown-menu" aria-labelledby="<%- togglerId %>"></ul></div></div>'),simpleBaseMarkup:n.template('<div class="more-bar-holder action-row"></div>'),closeButtonTemplate:n.template('<li class="dropdown-close"><i class="fa-close hide-text">'+s("Close")+"</i></li>"),launchersContainerSelector:".launchers-dropdown-menu",launchersListTemplate:n.template('<% if (withIcons) { %><li><ul class="launchers-list"></ul></li><% } else { %><li class="well-small"><ul class="unstyled launchers-list"></ul></li><% } %>'),simpleLaunchersListTemplate:n.template('<% if (withIcons) { %><ul class="launchers-list"></ul><% } else { %><ul class="unstyled launchers-list"></ul><% } %>'),launcherItemTemplate:n.template('<li class="launcher-item"></li>'),events:{click:"_showDropdown","mouseover .dropdown-toggle":"_showDropdown","mouseleave .dropleft.show":"_hideDropdown","click .dropdown-close .fa-close":"_hideDropdown"},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){const e=t||{};this.subviews=[],n.isEmpty(e.actionsHideCount)||(this.actionsHideCount=e.actionsHideCount),this.showCloseButton=e.showCloseButton,o.__super__.initialize.call(this,t),this.actions=this.createActions(e),n.each(this.actions,(function(t){this.listenTo(t,"preExecute",this.onActionRun)}),this),this.subviews.push(...this.actions)},dispose:function(){this.disposed||(delete this.actions,delete this.column,o.__super__.dispose.call(this))},onActionRun:function(t){this.$('.show > [data-toggle="dropdown"]').trigger("tohide.bs.dropdown")},createActions:function(t){const e=[],i=t.actions,s=t.actionConfiguration;return n.each(i,(function(i,n){s&&!1===s[n]||e.push(this.createAction(i,t))}),this),e},isEmpty:function(){return!this.actions.length},createAction:function(t,e){return new t(n.extend({model:e.model,datagrid:e.datagrid},e.actionOptions))},createLaunchers:function(){return n.map(this.actions,(function(t){return t.createLauncher({})}),this)},render:function(){let t=!1;return n.isEmpty(this.actions)?(this.$el.empty(),this):(this.actions.length<this.actionsHideCount&&(t=!0,this.baseMarkup=this.simpleBaseMarkup,this.launchersListTemplate=this.simpleLaunchersListTemplate,this.launchersContainerSelector=".more-bar-holder"),this.$el.html(this.baseMarkup(this.getTemplateData())),this.isLauncherListFilled=!1,t&&this.fillLauncherList(),this)},getTemplateData:function(){return{togglerId:"actions-view-dropdown-"+this.cid,label:s("oro.datagrid.card_actions.label")}},fillLauncherList:function(){if(!this.isLauncherListFilled){this.isLauncherListFilled=!0;const t=this.createLaunchers(),e=this.getLaunchersByIcons(t),i=this.$(this.launchersContainerSelector);this.showCloseButton&&t.length>=this.actionsHideCount&&i.append(this.closeButtonTemplate()),e.withIcons.length&&this.renderLaunchersList(e.withIcons,{withIcons:!0}).appendTo(i),e.withIcons.length&&e.withoutIcons.length&&i.append('<li class="divider"></li>'),e.withoutIcons.length&&this.renderLaunchersList(e.withoutIcons,{withIcons:!1}).appendTo(i)}},renderLaunchersList:function(t,i){i=i||{};const s=e(this.launchersListTemplate(i)),o=s.filter(".launchers-list").length?s:e(".launchers-list",s);return n.each(t,(function(t){o.append(this.renderLauncherItem(t))}),this),s},renderLauncherItem:function(t,i){i=i||{};const n=e(this.launcherItemTemplate(i)),s=n.filter(".launcher-item").length?n:e(".launcher-item",n);s.append(t.render().$el);const o="mode-"+t.launcherMode;return s.addClass(o),n},getLaunchersByIcons:function(t){const e={withIcons:[],withoutIcons:[]};return n.each(t,(function(t){t.icon?e.withIcons.push(t):e.withoutIcons.push(t)}),this),e},_showDropdown:function(t){this.fillLauncherList(),this.$('[data-toggle="dropdown"]').parent().hasClass("show")||this.$('[data-toggle="dropdown"]').dropdown("toggle"),t.stopPropagation()},_hideDropdown:function(t){this.$('[data-toggle="dropdown"]').parent().hasClass("show")&&this.$('[data-toggle="dropdown"]').dropdown("toggle"),t.stopPropagation()}});return o}.call(e,i,e,t))||(t.exports=n)},"./bundles/orodotmailer/js/app/components/dm-resource-component.js":(t,e,i)=>{var n;void 0===(n=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/orotranslation/js/translator.js"),s=i("./bundles/oroui/js/extend/jquery.js");return function(t){const i=t._sourceElement,o=s("input.dm-username"),a=s("input.dm-password"),r=i.find("button"),l=i.find(".connection-status"),c=i.find(".ping-holder"),d=function(t){t=t||n("oro.dotmailer.integration_transport.api_key.check.message"),l.removeClass("alert-info").addClass("alert-error").html(t)},u=function(){o.val().length&&a.val().length&&a.valid()?c.show():c.hide()};u(),o.on("keyup",(function(){u()})),a.on("keyup",(function(){u()})),r.on("click",(function(){o.valid()&&a.valid()?s.getJSON(t.pingUrl,{username:o.val(),password:a.val()},(function(t){e.isUndefined(t.error)?l.removeClass("alert-error").addClass("alert-info").html(t.msg):d(t.error)})).always((function(){l.show()})).fail(d):(l.show(),d())}))}}.call(e,i,e,t))||(t.exports=n)},"./bundles/orodotmailer/js/app/components/mapping-component.js":(t,e,i)=>{var n;void 0===(n=function(t){"use strict";const e=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/orotranslation/js/translator.js"),o=i("./bundles/orosegment/js/app/components/segment-component.js"),a=i("./bundles/oroquerydesigner/js/app/models/entity-fields-collection.js"),r=i("./bundles/oroentity/js/app/services/entity-structure-data-provider.js"),l=i("./bundles/orodotmailer/js/app/views/field-choice-item-view.js"),c=i("./bundles/orodotmailer/js/app/models/mapping-model.js"),d=i("./bundles/oroui/js/delete-confirmation.js"),u=o.extend({defaults:{entityChoice:"",valueSource:"",dataProviderFilterPreset:"dotmailer",mapping:{editor:{},form:"",itemContainer:"",itemTemplate:""},channel:{channelChoice:"",changeChannelConfirmMessage:""},select2FieldChoiceTemplate:"",select2FieldChoicePlaceholoder:"",entities:[],initEntityChangeEvents:!0},fieldRowViews:null,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.processOptions(t),this._deferredInit(),r.createDataProvider({},this).then(function(t){this._init(t),this._resolveDeferredInit()}.bind(this))},_init:function(t){this.dataProvider=t,this.$storage=e(this.options.valueSource),this.fieldRowViews=[],this.initEntityChangeEvents(),this.setupDataProvider(),this.initMapping(),this.initIntegrationChangeEvents(),this.form=this.$storage.closest("form")},eventNamespace:function(){return"."+this.cid},initIntegrationChangeEvents:function(){const t=new d({title:s("Change Integration Confirmation"),okText:s("Yes"),content:s(this.options.channel.changeChannelConfirmMessage)}),i=this,o=e(this.options.channel.channelChoice);o.data("previous",o.val()),o.on("change",(function(){const e=i.load()||[],s=function(){const t={};i.trigger("resetData",t),i.save(t),o.data("previous",o.val())};n.some(e,(function(t){return!n.isEmpty(t)}))?(t.on("ok",s),t.on("cancel",(function(){const t=o.data("previous");o.val(t).change()})),t.once("hidden",(function(){t.off("ok"),t.off("cancel")})),t.open()):s()})),this.once("dispose:before",(function(){t.dispose()}))},processOptions:function(t){this.options={},e.extend(!0,this.options,this.defaults,t)},addEntityFieldRow:function(t){const e=new l({autoRender:!0,noWrap:!0,fieldChoiceOptions:{entity:this.entityClassName,filterPreset:this.options.dataProviderFilterPreset,select2:{placeholder:this.options.select2FieldChoicePlaceholoder,pageableResults:!0,dropdownAutoWidth:!0}}});return this.$editorForm.find('[data-role="fields-container"]').append(e.el),this.fieldRowViews.push(e),this.listenTo(e,{change:function(){this.updateSyncCheckbox(),this.updateOriginField()},remove:function(t){const e=n.findWhere(this.fieldRowViews,{cid:t});e&&(this.removeFieldRowView(e),this.updateOriginField())}}),t&&e.setValue(t),this.updateSyncCheckbox(),e},removeFieldRowView:function(t){this.stopListening(t),this.fieldRowViews=n.without(this.fieldRowViews,t),t.dispose(),this.updateSyncCheckbox()},initSyncCheckbox:function(){this.$syncCheckbox=this.$editorForm.find("[data-purpose=two-way-sync-selector]"),this.$editorForm.on("after-reset"+this.eventNamespace(),function(){this.$syncCheckbox.prop("checked",!1)}.bind(this))},updateSyncCheckbox:function(){let t=this.fieldRowViews.length>1;t||(t=Boolean(n.detect(this.fieldRowViews,(function(t){const e=t.getValue();if(e&&this.dataProvider.pathToEntityChainSafely(e).length>2)return!0}),this))),t&&this.$syncCheckbox.prop("checked",!1),this.$syncCheckbox.prop("disabled",t)},initFieldTable:function(){this.confirmView=new d({content:""}),this.confirmView.on("ok",function(){this.collection.remove(this.confirmView.model)}.bind(this)),this.confirmView.on("hidden",(function(){delete this.model}));const t=n.template(e(this.options.select2FieldChoiceTemplate).text());this.$table.itemsManagerTable({collection:this.collection,itemTemplate:e(this.options.mapping.itemTemplate).html(),itemRender:function(e,i){try{const e=i.entityFields.split(","),s=n.map(e,(function(e){return this.formatChoice(e,t)}),this);i.entityFields=s.join(" + ")}catch(t){i.entityFields=s("oro.querydesigner.field_not_found"),i.deleted=!0}return i.dataField=i.dataField.name,i.isTwoWaySync?i.isTwoWaySync=s("Yes"):i.isTwoWaySync=s("No"),e(i)}.bind(this),deleteHandler:function(t,e){this.confirmView.setContent(e.message),this.confirmView.model=t,this.confirmView.open()}.bind(this)})},initFieldCollection:function(){const t=new a(this.load("mapping"),{model:c,dataProvider:this.dataProvider});this.listenTo(t,"add remove change",(function(){this.save(t.toJSON(),"mapping")})),this.collection=t},initEditorForm:function(){this.$editorForm.on("click"+this.eventNamespace(),".add-field",this.onAddFieldClick.bind(this)).on("before-save"+this.eventNamespace(),n.debounce(this.checkFieldRowExistOnError.bind(this))).on("change"+this.eventNamespace(),u.ORIGIN_FIELDS_SELECTOR,this.onOriginFieldsChange.bind(this)),this.$editorForm.itemsManagerEditor(e.extend(this.options.mapping.editor,{collection:this.collection,setter:function(t,e,i){return"dataField"===e&&(i=i.value),"isTwoWaySync"===e&&i&&t.prop("checked",!0),i},getter:function(t,e,i){return"dataField"===e&&(i=t.select2("data")&&{name:t.select2("data").name,value:i}),"isTwoWaySync"===e&&(i=t.is(":checked")?1:0),i}}))},initMapping:function(){this.$table=e(this.options.mapping.itemContainer),this.$editorForm=e(this.options.mapping.form),this.$entityFieldsInput=this.$editorForm.find(u.ORIGIN_FIELDS_SELECTOR),0!==this.$table.length&&0!==this.$editorForm.length&&(this.initSyncCheckbox(),this.initFieldCollection(),this.initFieldTable(),this.initEditorForm(),this.on("validate-data",function(t){this.$editorForm.itemsManagerEditor("hasChanges")&&t.push({component:s("oro.dotmailer.datafieldmapping.editor"),type:u.UNSAVED_CHANGES_ISSUE}),this.collection.isValid()||t.push({component:s("oro.dotmailer.datafieldmapping.editor"),type:u.INVALID_DATA_ISSUE})}.bind(this)),this.once("before-submit",function(){this.collection.removeInvalidModels(),this.$editorForm.itemsManagerEditor("reset")}.bind(this)),this.on("resetData",function(t){t.mappings=[],this.$table.itemsManagerTable("reset"),this.$editorForm.itemsManagerEditor("reset")}.bind(this)))},onAddFieldClick:function(){this.addEntityFieldRow()},checkFieldRowExistOnError:function(){0===this.fieldRowViews.length&&this.$entityFieldsInput.hasClass("error")&&this.addEntityFieldRow()},updateOriginField:function(){let t=n.invoke(this.fieldRowViews,"getValue");t=n.compact(t).join(","),this.$entityFieldsInput.val()!==t&&(this.ignoreFieldChange=!0,this.$entityFieldsInput.val(t).trigger("change"),delete this.ignoreFieldChange,this.checkFieldRowExistOnError())},onOriginFieldsChange:function(t){if(this.ignoreFieldChange)return;const i=e(t.currentTarget).val().split(",");n.each(this.fieldRowViews,this.removeFieldRowView,this),n.each(i,this.addEntityFieldRow,this)},dispose:function(){this.disposed||(this.$editorForm.off(this.eventNamespace()),this.$editorForm.itemsManagerEditor("destroy"),this.$table.itemsManagerTable("destroy"),delete this.$editorForm,delete this.$table,u.__super__.dispose.call(this))}},{INVALID_DATA_ISSUE:"INVALID_DATA",UNSAVED_CHANGES_ISSUE:"UNSAVED_CHANGES",ORIGIN_FIELDS_SELECTOR:"[data-purpose=multiple-entityfield-selector]"});return u}.call(e,i,e,t))||(t.exports=n)},"./bundles/orodotmailer/js/app/components/select2-autocomplete-channel-aware-address-book-component.js":(t,e,i)=>{var n;void 0===(n=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/orochannel/js/app/components/select2-autocomplete-channel-aware-component.js").extend({marketingListId:"",constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.marketingListId=e.result(t,"marketing_list_id")||this.marketingListId,n.__super__.initialize.call(this,t)},makeQuery:function(t){return n.__super__.makeQuery.call(this,t)+";"+this.marketingListId}});return n}.call(e,i,e,t))||(t.exports=n)},"./bundles/orodotmailer/js/app/models/mapping-model.js":(t,e,i)=>{var n;void 0===(n=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js");return i("./bundles/oroquerydesigner/js/app/models/entity-field-model.js").extend({fieldAttribute:"entityFields",defaults:{id:null,entityFields:null,dataField:null,isTwoWaySync:null},constructor:function t(e,i){t.__super__.constructor.call(this,e,i)},validate:function(t,i){let n;try{const i=t[this.fieldAttribute].split(",");e.each(i,(function(t){this.dataProvider.pathToEntityChain(t)}),this)}catch(t){n=t.message}return n}})}.call(e,i,e,t))||(t.exports=n)},"./bundles/orodotmailer/js/app/views/field-choice-item-view.js":(t,e,i)=>{var n;void 0===(n=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/app/views/base/view.js"),s=i("./bundles/oroentity/js/app/views/field-choice-view.js"),o=n.extend({template:i("../node_modules/@oroinc/oro-webpack-config-builder/loader/text-loader.js!./bundles/orodotmailer/templates/field-choice-item.html"),events:{'click [data-role="remove-item"]':"onRemove"},removable:!0,fieldChoiceOptions:null,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){e.extend(this,e.pick(t,"fieldChoiceOptions")),o.__super__.getTemplateData.call(this,t)},render:function(){o.__super__.render.call(this);const t=this.$("input");this.subview("field-choice",new s(e.extend({autoRender:!0,el:t},this.fieldChoiceOptions))),this.listenTo(this.subview("field-choice"),"change",(function(t){this.trigger("change",t)}))},onRemove:function(t){t.preventDefault(),this.trigger("remove",this.cid)},getValue:function(){return this.subview("field-choice").getValue()},setValue:function(t){this.subview("field-choice").setValue(t)}});return o}.call(e,i,e,t))||(t.exports=n)},"./bundles/orodotmailer/js/datafield-view.js":(t,e,i)=>{var n,s;n=[i("./bundles/oroui/js/extend/jquery.js"),i("./bundles/oroui/js/extend/backbone.js"),i("./bundles/oroui/js/extend/underscore.js"),i("./bundles/orotranslation/js/translator.js"),i("./bundles/oroui/js/mediator.js")],void 0===(s=function(t,e,i,n,s){"use strict";return e.View.extend({UPDATE_MARKER:"formUpdateMarker",fieldsSets:{type:[]},requiredOptions:["typeSelector","fieldsSets","formSelector"],constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(e){this.options=i.defaults(e||{},this.options);const n=this.requiredOptions.filter((function(t){return i.isUndefined(e[t])}));if(n.length)throw new TypeError("Missing required option(s): "+n.join(","));i.extend(this.fieldsSets,e.fieldsSets),t(e.typeSelector).on("change",this.processChange.bind(this))},processChange:function(e){const n=t(this.options.formSelector);let o=n.serializeArray();const a=n.attr("action"),r=this.fieldsSets.type;o=i.filter(o,(function(t){return-1!==i.indexOf(r,t.name)})),o.push({name:this.UPDATE_MARKER,value:1}),s.execute("submitPage",{url:a,type:n.attr("method"),data:t.param(o)})}})}.apply(e,n))||(t.exports=s)},"./bundles/orodotmailer/js/integration-connection.js":(t,e,i)=>{var n,s;n=[i("./bundles/oroui/js/extend/jquery.js"),i("./bundles/oroui/js/extend/backbone.js"),i("./bundles/oroui/js/extend/underscore.js"),i("./bundles/orotranslation/js/translator.js"),i("./bundles/oroui/js/mediator.js")],void 0===(s=function(t,e,i,n,s){"use strict";return e.View.extend({fieldsSets:{channel:[]},requiredOptions:["channelSelector","fieldsSets","formSelector"],constructor:function t(...e){t.__super__.constructor.apply(this,e)},initialize:function(e){this.options=i.defaults(e||{},this.options);const n=this.requiredOptions.filter((function(t){return i.isUndefined(e[t])}));if(n.length)throw new TypeError("Missing required option(s): "+n.join(","));i.extend(this.fieldsSets,e.fieldsSets),t(e.channelSelector).on("change",this.changeHandler.bind(this))},changeHandler:function(e){const n=t(this.options.formSelector);let o=n.serializeArray();const a=n.attr("action"),r=this.fieldsSets.channel;o=i.filter(o,(function(t){return-1!==i.indexOf(r,t.name)})),s.execute("submitPage",{url:a,type:n.attr("method"),data:t.param(o)})}})}.apply(e,n))||(t.exports=s)},"./bundles/orodotmailer/js/sync-buttons-handler.js":(t,e,i)=>{var n,s;n=[i("./bundles/oroui/js/extend/jquery.js"),i("./bundles/oroui/js/mediator.js"),i("./bundles/oroui/js/app/components/widget-component.js")],void 0===(s=function(t,e,i){"use strict";const n=window.console;return function(s){const o=this;this.startSyncDelegate=function(){e.execute("showLoading"),t.post(this.data("url")).done((function(t){e.execute("addMessage","success",t.message),e.execute("refreshPage")})).always((function(){e.execute("hideLoading")}))},this.updateSettingsDelegate=function(){const t=this.data("message");new(i.extend({defaults:{type:"dialog",options:{stateEnabled:!1,incrementalPosition:!1,loadingMaskEnabled:!0,dialogOptions:{modal:!0,resizable:!1,width:510,autoResize:!0}}},constructor:function t(e){t.__super__.constructor.call(this,e)},_bindEnvironmentEvent:function(i){this.listenTo(i,"formSave",(function(){i.remove(),t&&e.execute("addMessage","success",t),e.execute("refreshPage")}))}}))({options:{url:this.data("url"),title:this.data("title")}}).openWidget()},this.syncButtonsClickHandlerDelegate=function(){const e=t(this);switch(e.data("action")){case"sync-with-dotmailer":return void o.startSyncDelegate.call(e);case"connect-with-dotmailer-setting-update":return void o.updateSettingsDelegate.call(e)}n&&n.warn&&n.warn("Unrecognized sync button action")},this.bindElementsEvents=function(){t(s).click(this.syncButtonsClickHandlerDelegate)},this.bindElementsEvents()}}.apply(e,n))||(t.exports=s)},"./bundles/orosales/js/app/components/customer-component.js":(t,e,i)=>{var n;void 0===(n=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/tools.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/app/components/base/component.js"),a=i("./bundles/orosales/js/app/views/create-customer-view.js"),r=o.extend({views:[],$el:null,inputSelector:null,requiredOptions:["inputSelector","customerSelector"],constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){e.each(this.requiredOptions,(function(i){if(!e.has(t,i))throw new Error('Required option "'+i+'" not found.')})),this.inputSelector=t.inputSelector,this.$el=t._sourceElement,s.on("customer-dialog:select",this.onCustomerDialogSelect,this),s.on("widget_registration:customer-dialog",this.onCustomerDialogInit,this);const i=this.$el.find(t.customerSelector);e.each(i,(function(t){this.views.push(new a({el:t,inputSelector:this.inputSelector}))}),this)},onCustomerDialogInit:function(t){let i=this.$el.find(this.inputSelector).data("select2_query_additional_params")||{};t.options.routeParams=i;let s=t.options.url;const o=s.substring(0,s.indexOf("?")),a=n.unpackFromQueryString(s.substring(s.indexOf("?"),s.length));e.isEmpty(i)||(i=e.extend({},a,{params:i},i),s=o||s+"?"+n.packToQueryString(i),t.options.url=s)},onCustomerDialogSelect:function(t){const e=this.$el.find(this.inputSelector);e.inputWidget("val",t,!0),e.inputWidget("focus")},dispose:function(){this.disposed||(s.off("customer-dialog:select",this.onCustomerSelect,this),r.__super__.dispose.call(this))}});return r}.call(e,i,e,t))||(t.exports=n)},"./bundles/orosales/js/app/views/account-multicustomer-view.js":(t,e,i)=>{var n;void 0===(n=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/app/views/base/view.js").extend({activeTab:null,customerType:"sales_b2bcustomer",useChannel:!0,events:{"shown.bs.tab .tab-content":"onTabShown","shown.bs.tab >.oro-tabs>ul":"onCustomerShown"},listen:{"customer-info-widget:init mediator":function(t,e){0!==this.$(e.container||e.el).length&&t.setActiveTab(this.activeTab)}},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){e.extend(this,e.pick(t,["customerType","useChannel"])),s.__super__.initialize.call(this,t)},onTabShown:function(t){const i=this.$(t.target).data("target"),n=this.makeTargetRegExp("(.*)");this.activeTab=e.result(i.match(n),1,null)},onCustomerShown:function(t){if(this.activeTab){const t=this.makeTargetRegExp(this.activeTab),e=this.$("a[data-target]:visible").filter((function(){return t.test(n(this).data("target"))}));1!==e.length||e.parent().hasClass("active")||e.click()}},makeTargetRegExp:function(t){let e="#oro_"+this.customerType+"_"+t+"_customer_\\d+";return this.useChannel&&(e+="_channel_\\d+"),new RegExp(e)}});return s}.call(e,i,e,t))||(t.exports=n)},"./bundles/orosales/js/app/views/board/opportunity-card-view.js":(t,e,i)=>{var n;void 0===(n=function(t){"use strict";const e=i("./bundles/orodatagrid/js/app/views/board/card-view.js"),n=i("./bundles/orocurrency/js/formatter/multi-currency.js"),s=e.extend({className:"opportunity-card-view card-view",template:i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orosales/templates/board/opportunity-card-view.html"),constructor:function t(e){t.__super__.constructor.call(this,e)},getTemplateData:function(){const t=s.__super__.getTemplateData.call(this),e=n.unformatMultiCurrency(t.budgetAmount);return t.budgetAmount=e.amount,t.budgetCurrency=e.currency,t}});return s}.call(e,i,e,t))||(t.exports=n)},"./bundles/orosales/js/app/views/create-customer-view.js":(t,e,i)=>{var n;void 0===(n=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/orotranslation/js/translator.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/fosjsrouting/js/router.js"),a=i("./bundles/orowindows/js/widget/dialog-widget.js"),r=i("./bundles/oroui/js/app/views/base/view.js").extend({events:{"click button":"onCreate"},dialogWidget:null,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){r.__super__.initialize.call(this,t),this.options=e.defaults(t||{},this.options)},onCreate:function(){const t=this.$("[data-customer]").data("customer"),e=this.$el.parents().find(this.options.inputSelector).data("select2_query_additional_params")||{};this.dialogWidget=new a({title:n("Create {{ entity }}",{entity:this.$el.text()}),url:o.generate(t.routeCreate,e),stateEnabled:!1,incrementalPosition:!0,dialogOptions:{modal:!0,allowMaximize:!0,width:1280,height:650}}),this.dialogWidget.once("formSave",(e=>{this.dialogWidget.remove(),this.dialogWidget=null,s.trigger("customer-dialog:select",JSON.stringify({entityClass:t.className,entityId:e}))})),this.dialogWidget.render()}});return r}.call(e,i,e,t))||(t.exports=n)},"./bundles/orosales/js/app/views/opportunity-status-select-view.js":(t,e,i)=>{var n;void 0===(n=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/app/views/base/view.js").extend({constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){n.__super__.initialize.call(this,t),this.options=e.defaults(t||{},this.options),this.render()},render:function(){this.initLayout().then(this.afterLayoutInit.bind(this))},afterLayoutInit:function(){const t=this.$('select[data-name="field__status"]'),e=this.$('input[data-name="field__probability"]'),i=t.data("probabilities");let n=!1;i.hasOwnProperty(t.val())&&parseFloat(i[t.val()])===parseFloat(e.val())&&(n=!0),e.on("change",(function(t){n=!1})),t.on("change",(function(s){const o=t.val();n&&i.hasOwnProperty(o)&&e.val(i[o])}))}});return n}.call(e,i,e,t))||(t.exports=n)},"./bundles/orosales/js/app/views/update-page-view.js":(t,e,i)=>{var n;void 0===(n=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/app/views/base/view.js").extend({constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){n.__super__.initialize.call(this,t),this.options=e.defaults(t||{},this.options),this.render()},render:function(){this.initLayout().then(this.afterLayoutInit.bind(this))},afterLayoutInit:function(){const t=this.pageComponent("oro_sales_opportunity_form_status").view.$el,e=this.$('input[data-name="field__probability"]:enabled'),i=t.data("probabilities");let n=!1;0!==e.length&&(i.hasOwnProperty(t.val())&&parseFloat(i[t.val()])===parseFloat(e.val())&&(n=!0),e.on("change",(function(t){n=!1})),t.on("change",(function(s){const o=t.val();n&&i.hasOwnProperty(o)&&e.val(i[o])})))}});return n}.call(e,i,e,t))||(t.exports=n)}}]);