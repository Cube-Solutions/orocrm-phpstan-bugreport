(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[364],{"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orodashboard/templates/widget/dashboard-item.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){if(__p+='<div class="box-type1 dashboard-widget '+(null==(__t=headerClass)?"":_.escape(__t))+(null==(__t=allowEdit?" editable":"")?"":_.escape(__t))+'" data-layout="separate">\n    <div class="widget-header clearfix">\n        <div class="actions-container">\n            <div class="collapse-expand-action-container">\n                <button class="btn btn-icon btn-light-custom collapse-action'+(null==(__t=collapsed?" collapsed":"")?"":_.escape(__t))+'"\n                    data-collapsed-title="'+(null==(__t=_.__("Expand"))?"":_.escape(__t))+'"\n                    data-expanded-title="'+(null==(__t=_.__("Collapse"))?"":_.escape(__t))+'"\n                    aria-label="'+(null==(__t=_.__("Expand"))?"":_.escape(__t))+" / "+(null==(__t=_.__("Collapse"))?"":_.escape(__t))+'"\n                >\n                    <span class="fa-icon collapse-action-icon" aria-hidden="true"></span>\n                </button>\n            </div>\n        </div>\n        <div class="title sortable widget-title" title="'+(null==(__t=title)?"":_.escape(__t))+'">'+(null==(__t=title)?"":_.escape(__t))+'</div>\n        <div class="widget-actions-container"></div>\n        <div class="actions-container">\n            <div class="default-actions-container">\n                ',showConfig){__p+="\n                ";var dashboardActionId=_.uniqueId("dashboard-action-");__p+='\n                <div class="dropdown action-wrapper">\n                    <button id="'+(null==(__t=dashboardActionId)?"":_.escape(__t))+'"\n                            class="btn btn-icon btn-light-custom dropdown-toggle dropdown-toggle--no-caret"\n                            data-toggle="dropdown"\n                            aria-label="'+(null==(__t=_.__("oro.dashboard.show_more_actions"))?"":_.escape(__t))+'"\n                            aria-haspopup="true"\n                            aria-expanded="false"\n                            data-placement="bottom-end"\n                            data-modifiers="'+(null==(__t=JSON.stringify({offset:{offset:"0,-10",order:700}}))?"":_.escape(__t))+'"\n                    >\n                        <span class="fa-ellipsis-h" aria-hidden="true"></span>\n                    </button>\n                    <ul class="dropdown-menu" aria-labelledby="'+(null==(__t=dashboardActionId)?"":_.escape(__t))+'">\n                        <li>\n                            <a class="configure-action dropdown-item" href="#" role="button"\n                               title="'+(null==(__t=_.__("oro.dashboard.widget.configure"))?"":_.escape(__t))+'">\n                                <span class="fa-cog hide-text" aria-hidden="true"></span> '+(null==(__t=_.__("oro.dashboard.widget.configure"))?"":_.escape(__t))+'\n                            </a>\n                        </li>\n                        <li>\n                            <a class="remove-action dropdown-item" href="#" role="button"\n                               title="'+(null==(__t=_.__("oro.dashboard.widget.remove"))?"":_.escape(__t))+'">\n                                <span class="fa-trash-o hide-text" aria-hidden="true"></span> '+(null==(__t=_.__("oro.dashboard.widget.remove"))?"":_.escape(__t))+"\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n                "}else __p+='\n                <span class="action-wrapper">\n                    <button class="btn-link remove-action"\n                            aria-label="'+(null==(__t=_.__("oro.dashboard.widget.remove"))?"":_.escape(__t))+'">\n                        <span class="fa-trash-o" aria-hidden="true"></span>\n                    </button>\n                </span>\n                ';__p+='\n            </div>\n        </div>\n    </div>\n    <div class="row-fluid '+(null==(__t=contentClasses.join(" "))?"":_.escape(__t))+'"></div>\n</div>\n'}return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroui/templates/widget-picker/widget-picker-modal-template.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="widget-picker__filter" data-role="widget-picker-filter"></div>\n<div class="widget-picker__container" data-role="widget-picker-container">\n    <div class="widget-picker__results" data-role="widget-picker-results"></div>\n    <div class="no-data" data-role="widget-picker-no-results-found">\n        '+(null==(__t=_.__("oro.ui.widget_picker.filter.search_no_found"))?"":_.escape(__t))+"\n    </div>\n</div>\n";return __p}},"./bundles/orodashboard/js/app/components/dashboard-navigation-component.js":(e,t,i)=>{var o;void 0===(o=function(e){"use strict";const t=i("./bundles/oroui/js/app/components/base/component.js"),o=i("./bundles/orodashboard/js/dashboard-util.js");return t.extend({optionNames:t.prototype.optionNames.concat(["gridName"]),constructor:function e(t){e.__super__.constructor.call(this,t)},listen:function(){const e={};return e["datagrid:beforeRemoveRow:"+this.gridName+" mediator"]="onBeforeRemoveRow",e},onBeforeRemoveRow:function(e){o.onDashboardRemove(e.get("id"))}})}.call(t,i,t,e))||(e.exports=o)},"./bundles/orodashboard/js/app/views/abstract-widget-date-range-view.js":(e,t,i)=>{var o;void 0===(o=function(e){"use strict";const t=i("./bundles/oroui/js/app/views/base/view.js"),o=i("./bundles/oroui/js/extend/underscore.js"),s=t.extend({autoRender:!0,optionNames:t.prototype.optionNames.concat(["formName","formFullName","valueType","valueConfig","metadata"]),valueConfig:{start:"",end:""},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.valueConfig=o.clone(this.valueConfig),s.__super__.initialize.call(this,e)},_getDataRangeFilterValue:function(){return this.valueConfig.startEndPrefix=this.formFullName,{part:"value",type:parseInt(this.valueType),value:this.valueConfig}},_renderDateRangeFilter:function(e){const t=this._getDataRangeFilterValue();return e.updateValue(t),e.render(),e.$el},_dateRangeFilterAfterRender:function(){this.$el.parent().not(".ui-widget-content").css("overflow","inherit"),this.$el.closest(".ui-widget-content").trigger("dialogresize")}});return s}.call(t,i,t,e))||(e.exports=o)},"./bundles/orodashboard/js/app/views/dashboard-change-view.js":(e,t,i)=>{var o;void 0===(o=function(e){"use strict";const t=i("./bundles/oroui/js/app/views/base/view.js"),o=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/fosjsrouting/js/router.js"),n=i("./bundles/oroui/js/mediator.js");return t.extend({events:{change:"onChange"},constructor:function e(t){e.__super__.constructor.call(this,t)},onChange:function(e){const t=s.generate("oro_dashboard_view",{id:o(e.currentTarget).val(),change_dashboard:!0});n.execute("redirectTo",{url:t},{redirect:!0})}})}.call(t,i,t,e))||(e.exports=o)},"./bundles/orodashboard/js/app/views/dashboard-container-view.js":(e,t,i)=>{var o;void 0===(o=function(e){"use strict";const t=i("./bundles/oroui/js/app/views/base/view.js"),o=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/fosjsrouting/js/router.js"),a=i("./bundles/orotranslation/js/translator.js"),d=i("./bundles/oroui/js/mediator.js"),r=i("./bundles/oroui/js/widget/widget-manager.js"),l=i("./bundles/orodashboard/js/widget/dashboard-item.js"),c=i("./bundles/orodashboard/js/dashboard-util.js"),u=i("./bundles/orodashboard/js/widget/configuration-widget.js"),h=i("./bundles/orodashboard/js/widget-picker-modal.js"),p=i("./bundles/orosync/js/content-manager.js");i("./bundles/oroui/js/extend/jquery-ui/widgets/sortable.js");const _=t.extend({widgets:{},options:{widgetIds:[],handle:".dashboard-widget .widget-header .sortable",columnsSelector:".dashboard-column",emptyTextSelector:"> .empty-text",allowEdit:!1,placeholder:{element:function(e){const t=o(e).height();return o('<div><div class="widget-placeholder" style="height: '+t+'px;">'+a("oro.dashboard.drop_placeholder_label")+"</div></div>")[0]},update:function(e,t){}}},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){const t=this;this.options=s.extend({},this.options,e),d.off("dashboard:widget:add",this.addToDashboard,this),d.on("dashboard:widget:add",this.addToDashboard,this),this.widgets={},s.each(this.options.widgetIds,(function(e){r.getWidgetInstance(e,(function(e){t.add(e)}))})),this._updateEmptyTextVisibility(),this.options.allowEdit&&o(this.options.columnsSelector).sortable({handle:this.options.handle,placeholder:this.options.placeholder,connectWith:this.options.columnsSelector,start:function(){t._lockLayoutHeight(),t._hideEmptyText()},stop:function(e,i){t._releaseLayoutHeight(),t.saveLayoutPosition(),t._updateEmptyTextVisibility()}}),o(".dashboard-container-wrapper .title-buttons-container .remove-button").on("removesuccess",(function(){c.onDashboardRemove(o(this).attr("data-id"))})),o(".dashboard-widgets-add").on("click",this._onClickAddWidget.bind(this)),_.__super__.initialize.call(this,e),p.cacheIgnore()},getAvailableWidgets:function(){const e=this.widgets;return s.map(this.options.availableWidgets,(function(t){return s.extend(t,{added:s.filter(e,(function(e){return e.options.widgetName===t.widgetName})).length})}))},_onClickAddWidget:function(e){e.preventDefault();const t=o(e.target).closest(this.options.columnsSelector).index(),i=-1===t?0:t;new h({dashboard:this,dashboardId:this.options.dashboardId,targetColumn:i,allowOk:!1}).open()},addToDashboard:function(e){const t="dashboard-widget-"+e.id,i="widget-container-"+t,a=e.layout_position[0]?e.layout_position[0]:0;o("#dashboard-column-"+a).prepend(o('<div id="'+i+'"></div>'));const d={id:e.id,expanded:e.expanded,layoutPosition:e.layout_position},r={widgetType:"dashboard-item",wid:t,url:n.generate(e.config.route,s.extend(e.config.route_parameters,{_widgetId:d.id})),state:d,loadingMaskEnabled:!1,container:"#"+i,allowEdit:this.options.allowEdit,showConfig:this.options.allowEdit&&!s.isEmpty(e.config.configuration),widgetName:e.name,configurationDialogOptions:e.config.configuration_dialog_options},c=new l(r);c.render(),this.add(c),this.options.allowEdit&&o(this.options.columnsSelector).sortable("refresh")},saveLayoutPosition:function(){const e=this,t={layoutPositions:{}};o(this.options.columnsSelector).each((function(i,s){o("> div",s).each((function(s,n){const a=o(".widget-content",n).data("wid");if(e.widgets[a]){const o=e.widgets[a],n=o.state.id;t.layoutPositions[n]=o.state.layoutPosition=[i,s]}}))})),o.ajax({url:this._getSaveLayoutPositionsUrl(),type:"PUT",data:o.param(t)})},add:function(e){const t=e.getWid();this.widgets[t]=e,this._updateEmptyTextVisibility(),e.off("removeFromDashboard",this._onRemove,this),e.on("removeFromDashboard",this._onRemove,this),e.off("configure",this._onConfigure,this),e.on("configure",this._onConfigure,this),e.off("collapse expand",this._onCollapseOrExpand,this),e.on("collapse expand",this._onCollapseOrExpand,this)},_onRemove:function(e,t){const i=t.widget.parent();t.remove(),i.remove(),delete this.widgets[t.getWid()],this._updateEmptyTextVisibility(),o.ajax({url:this._getRemoveWidgetUrl(t),type:"DELETE"})},_onConfigure:function(e,t){const i=new u({widget:t});d.on("widget_success:"+i.getWid(),t.render,t),i.render()},_onCollapseOrExpand:function(e,t){o.ajax({url:this._getUpdateWidgetUrl(t),type:"PUT",data:{isExpanded:t.state.expanded?1:0}})},_lockLayoutHeight:function(){this._releaseLayoutHeight();const e=o(this.options.columnsSelector),t=e.parents(".scrollable-container").first(),i=t.find(".dashboard-container"),s=parseInt(i.css("paddingBottom"))+parseInt(i.css("paddingTop"));let n=t.height()-s;e.each((function(e,t){const i=o(t).height();n=n>i?n:i})),e.css({minHeight:n+"px"}),e.sortable("refresh")},_releaseLayoutHeight:function(){o(this.options.columnsSelector).css({minHeight:"0px"})},_hideEmptyText:function(){o(this.options.emptyTextSelector,this.options.columnsSelector).addClass("hidden-empty-text")},_updateEmptyTextVisibility:function(){const e=this;o(this.options.columnsSelector).each((function(t,i){e._isEmptyColumn(t)?o(e.options.emptyTextSelector,i).removeClass("hidden-empty-text"):o(e.options.emptyTextSelector,i).addClass("hidden-empty-text")}))},_isEmptyColumn:function(e){let t=!0;return s.each(this.widgets,(function(i){i.state.layoutPosition[0]===e&&(t=!1)})),t},_getSaveLayoutPositionsUrl:function(){return n.generate("oro_api_put_dashboard_widget_positions",{dashboardId:this.options.dashboardId})},_getUpdateWidgetUrl:function(e){return n.generate("oro_api_put_dashboard_widget",{dashboardId:this.options.dashboardId,widgetId:e.state.id})},_getRemoveWidgetUrl:function(e){return n.generate("oro_api_delete_dashboard_widget",{dashboardId:this.options.dashboardId,widgetId:e.state.id})}});return _}.call(t,i,t,e))||(e.exports=o)},"./bundles/orodashboard/js/app/views/widget-date-compare-view.js":(e,t,i)=>{var o;void 0===(o=function(e){"use strict";const t=i("./bundles/oroui/js/app/views/base/view.js"),o=t.extend({autoRender:!0,optionNames:t.prototype.optionNames.concat(["useDateSelector","datepickerSelector"]),datepickerSelector:".datepicker-input",events:{'change [data-role="updateDatapicker"]':"onChange"},constructor:function e(t){e.__super__.constructor.call(this,t)},onChange:function(e){const t=e.currentTarget.checked?"enable":"disable";this.$(this.datepickerSelector).datepicker(t)},render:function(){return!1===this.$(this.useDateSelector).prop("checked")&&this.$(this.datepickerSelector).datepicker("disable"),o.__super__.render.call(this)}});return o}.call(t,i,t,e))||(e.exports=o)},"./bundles/orodashboard/js/app/views/widget-date-range-view.js":(e,t,i)=>{var o;void 0===(o=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/orodashboard/js/widget/date-range.js"),s=i("./bundles/orodashboard/js/app/views/abstract-widget-date-range-view.js").extend({constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){s.__super__.initialize.call(this,e);const i=new(o.extend(this.metadata))({$form:t('[name="'+e.formFullName+'[part]"]').closest("form")}),n=this._renderDateRangeFilter(i);this.$(".date-range-filter-"+e.formName).append(n).trigger("content:changed"),this._dateRangeFilterAfterRender()}});return s}.call(t,i,t,e))||(e.exports=o)},"./bundles/orodashboard/js/app/views/widget-datetime-range-view.js":(e,t,i)=>{var o;void 0===(o=function(e){"use strict";const t=i("./bundles/orodashboard/js/widget/datetime-range.js"),o=i("./bundles/orodashboard/js/app/views/abstract-widget-date-range-view.js").extend({constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){o.__super__.initialize.call(this,e);const i=new(t.extend(this.metadata)),s=this._renderDateRangeFilter(i);this.$(".datetime-range-filter-"+e.formName).append(s),this._dateRangeFilterAfterRender()}});return o}.call(t,i,t,e))||(e.exports=o)},"./bundles/orodashboard/js/app/views/widget-tabs-view.js":(e,t,i)=>{var o;void 0===(o=function(e){"use strict";const t=i("./bundles/oroui/js/app/views/base/view.js"),o=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/app/views/loading-mask-view.js"),n=t.extend({events:{"shown.bs.tab .tab-button":"onTabShown"},loadingMask:null,widgetComponentProcessingClass:"widget-component-processing",constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.subview("loading",new s({container:this._getTabContent()})),n.__super__.initialize.call(this,e)},_getTabContent:function(){return this.$el.closest(".widget-content").find(".tab-content")},onTabShown:function(e){const t=o(e.currentTarget),i=o(e.relatedTarget),s=this.subview("loading"),n=this._getTabContent();n.attr("aria-labelledby",t.attr("id")),s.show(),t.addClass(this.widgetComponentProcessingClass),o.ajax({url:t.data("url"),dataType:"html",error:function(){i.trigger("click")},success:function(e){n.find(".content").trigger("content:remove").html(e).trigger("content:changed")},complete:function(){s.hide(),t.removeClass(this.widgetComponentProcessingClass)}.bind(this)})}});return n}.call(t,i,t,e))||(e.exports=o)},"./bundles/orodashboard/js/dashboard-util.js":(e,t,i)=>{var o;void 0===(o=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js");return{onDashboardRemove:function(e){t('[data-menu="'+e+'"]').remove(),t("[data-menu]").length||t(".menu-divider").remove()}}}.call(t,i,t,e))||(e.exports=o)},"./bundles/orodashboard/js/items/collection.js":(e,t,i)=>{var o,s;o=[i("./bundles/oroui/js/extend/backbone.js"),i("./bundles/orodashboard/js/items/model.js")],void 0===(s=function(e,t){"use strict";return e.Collection.extend({model:t,constructor:function e(...t){e.__super__.constructor.apply(this,t)}})}.apply(t,o))||(e.exports=s)},"./bundles/orodashboard/js/items/model.js":(e,t,i)=>{var o,s;o=[i("./bundles/oroui/js/extend/backbone.js")],void 0===(s=function(e){"use strict";return e.Model.extend({defaults:{id:null,label:null,show:!0,order:1,namePrefix:""},constructor:function e(t,i){e.__super__.constructor.call(this,t,i)}})}.apply(t,o))||(e.exports=s)},"./bundles/orodashboard/js/items/view.js":(e,t,i)=>{var o,s;o=[i("./bundles/oroui/js/extend/backbone.js"),i("./bundles/oroui/js/extend/underscore.js"),i("./bundles/orodashboard/js/items/collection.js"),i("./bundles/oroui/js/items-manager/table.js"),i("./bundles/oroui/js/extend/select2.js")],void 0===(s=function(e,t,i){"use strict";return e.View.extend({events:{"change .item-select":"_toggleButtons","click .add-button:not(.disabled)":"_onAddClick","click .add-all-button:not(.disabled)":"_onAddAllClick"},selectTplSelector:"#widget-items-item-select-template",itemTplSelector:"#widget-items-item-template",requiredOptions:["itemsData","baseName"],items:null,filteredItems:null,itemSelect:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){t.each(this.requiredOptions,(function(i){if(!t.has(e,i))throw new Error('Required option "'+i+'" not found.')})),this.items=this._initializeItems(e.itemsData,e.baseName),this._initializeFilter(this.items,e),this._initializeItemGrid(this.items,e),this._toggleButtons(),this.$dialog=this.$el.closest(".ui-dialog"),this.$dialog.css("top",0)},_initializeItems:function(e,t){const o=new i(e);return o.each((function(e,i){e.set("namePrefix",t+"["+i+"]")})),o},_initializeFilter:function(i,o){const s=t.template(e.$(this.selectTplSelector).html())({items:i}),n=this.$(".controls:first");n.prepend(s),this.itemSelect=n.find("select"),this.itemSelect.inputWidget("create","select2",{initializeOptions:{allowClear:!0,placeholder:o.placeholder||null}}),i.on("change:show",(function(e){const t=this.itemSelect.find("option[value="+e.id+"]");e.get("show")?t.addClass("hide"):t.removeClass("hide")}),this);const a=i.where({show:!0});t.each(a,(function(e){this.itemSelect.find("option[value="+e.id+"]").addClass("hide")}),this)},_initializeItemGrid:function(t){const o=this.$(".item-container"),s=t.where({show:!0}),n=this.filteredItems=new i(s,{comparator:"order"});o.itemsManagerTable({itemTemplate:e.$(this.itemTplSelector).html(),collection:n,moveUpHandler:this.moveUpHandler.bind(this),moveDownHandler:this.moveDownHandler.bind(this)}),n.on("sort add",(function(){this.each((function(e,t){e.set("order",t,{silent:!0}),o.find('[data-cid="'+e.cid+'"] input.order').val(t).trigger("change")}))})),n.on("action:delete",(function(e){e.set("show",!1)})),t.on("change:show",(function(e){e.get("show")?n.add(e):n.remove(e)})),o.on("change",(function(i){let o;const s=e.$(i.target),n=t.get(s.closest("tr").data("cid"));n&&(o=s.is(":checkbox")?s.is(":checked"):s.val(),n.set(s.data("name"),o))}))},_onAddClick:function(){const e=this.itemSelect.inputWidget("val");this.items.get(e).set("show",!0),this.itemSelect.inputWidget("val",""),this.itemSelect.change()},_onAddAllClick:function(){this.items.each((function(e){e.set("show",!0)})),this.itemSelect.inputWidget("val",""),this.itemSelect.change()},_toggleButtons:function(){this.itemSelect.inputWidget("val")?this.$(".add-button").removeClass("disabled"):this.$(".add-button").addClass("disabled")},moveUpHandler:function(e){this._moveModel(e,-1)},moveDownHandler:function(e){this._moveModel(e,1)},_moveModel:function(e,t){let i,o;const s=this.filteredItems,n=s.indexOf(e)+t;n>=0&&n<s.length&&(o=s.at(n),i=e.get("order"),e.set("order",o.get("order")),o.set("order",i),s.sort())}})}.apply(t,o))||(e.exports=s)},"./bundles/orodashboard/js/widget-picker-modal.js":(e,t,i)=>{var o;void 0===(o=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/orotranslation/js/translator.js"),n=i("./bundles/fosjsrouting/js/router.js"),a=i("./bundles/oroui/js/mediator.js"),d=i("./bundles/oroui/js/modal.js"),r=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroui/templates/widget-picker/widget-picker-modal-template.html"),l=i("./bundles/oroui/js/app/models/base/collection.js"),c=i("./bundles/oroui/js/app/models/widget-picker/widget-picker-model.js"),u=i("./bundles/oroui/js/app/components/widget-picker-component.js"),h=d.extend({className:"modal oro-modal-normal widget-picker__modal  modal--fullscreen-small-device",defaultOptions:{dashboard:null,content:r(),title:s("oro.dashboard.add_dashboard_widgets.title"),cancelText:s("Close")},component:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=o.defaults(e||{},this.defaultOptions),h.__super__.initialize.call(this,e)},open:function(e){if(h.__super__.open.call(this,e),!this.component){const e=new l(this.options.dashboard.getAvailableWidgets(),{model:c});this.component=new u({_sourceElement:this.$content,collection:e,loadWidget:this.loadWidget.bind(this)})}return this},dispose:function(){this.disposed||(this.component&&(this.component.dispose(),this.component=null),h.__super__.dispose.call(this))},loadWidget:function(e,i){t.post(n.generate("oro_api_post_dashboard_widget_add_widget"),{widgetName:e.getName(),dashboardId:this.options.dashboardId,targetColumn:this.options.targetColumn},(function(t){a.trigger("dashboard:widget:add",t),i(),e.increaseAddedCounter()}),"json")}});return h}.call(t,i,t,e))||(e.exports=o)},"./bundles/orodashboard/js/widget/configuration-widget.js":(e,t,i)=>{var o,s;o=[i("./bundles/orotranslation/js/translator.js"),i("./bundles/fosjsrouting/js/router.js"),i("./bundles/orowindows/js/widget/dialog-widget.js"),i("./bundles/oroui/js/extend/underscore.js")],void 0===(s=function(e,t,i,o){"use strict";const s=i.extend({constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(i){if(void 0===i.widget)throw new Error('Option "widget" was not specified.');this.options.el="#widget-configuration",this.options.url=t.generate("oro_dashboard_configure",{id:i.widget.state.id}),i.dialogOptions=o.extend({title:e("oro.dashboard.widget_configuration_label")+" - "+i.widget.options.title,modal:!0,minHeight:50,minWidth:380,resizable:!1,width:"auto"},i.widget.options.configurationDialogOptions||{}),s.__super__.initialize.call(this,i)}});return s}.apply(t,o))||(e.exports=s)},"./bundles/orodashboard/js/widget/dashboard-item.js":(e,t,i)=>{var o,s;o=[i("./bundles/oroui/js/extend/underscore.js"),i("./bundles/oroui/js/extend/backbone.js"),i("./bundles/orotranslation/js/translator.js"),i("./bundles/oroui/js/mediator.js"),i("./bundles/oroui/js/widget/block-widget.js"),i("./bundles/oroui/js/delete-confirmation.js"),i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orodashboard/templates/widget/dashboard-item.html")],void 0===(s=function(e,t,i,o,s,n,a){"use strict";const d=t.$,r=s.extend({widgetEvents:{"click .collapse-expand-action-container .collapse-action":function(e){e.preventDefault(),this.state.expanded?this.collapse():this.expand()},"click .default-actions-container .remove-action":function(e){e.preventDefault(),this.onRemoveFromDashboard()},"click .default-actions-container .configure-action":function(e){e.preventDefault(),this.onConfigure()}},state:{id:0,expanded:!0,layoutPosition:[0,0]},options:e.extend({},s.prototype.options,{type:"dashboard-item",actionsContainer:".widget-actions-container",contentContainer:".row-fluid",contentClasses:[],allowEdit:!1,template:a,configurationDialogOptions:{}}),constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(t){this.options=e.defaults(t||{},this.options),this.options.templateParams.allowEdit=this.options.allowEdit,this.options.templateParams.collapsed=t.state.expanded,this.options.templateParams.showConfig=this.options.showConfig,this.options.templateParams.headerClass=this.options.widgetName?this.options.widgetName.split("_").join("-")+"-widget-header":"",this.options.title||(this.options.title=this.$el.data("widget-title")),r.__super__.initialize.call(this,t)},render:function(){return this.state.expanded||(this.widgetContentContainer.attr("data-layout","separate"),this.listenToOnce(this,"expand",(function(){this.widgetContentContainer.removeAttr("data-layout"),this.render()}))),r.__super__.render.call(this)},initializeWidget:function(e){this._initState(e),r.__super__.initializeWidget.call(this,e)},_afterLayoutInit:function(){this.$el.removeClass("invisible"),r.__super__._afterLayoutInit.call(this)},_initState:function(t){if(t.state&&(this.state=e.extend({},this.state,t.state)),this.state.layoutPosition&&(this.state.layoutPosition=e.map(this.state.layoutPosition,(function(e){return parseInt(e)}))),!this.state.id)throw new Error("Dashboard widget id should be defined.");this.once("renderComplete",this._initWidgetCollapseState)},_initWidgetCollapseState:function(){this.isCollapsed()?this._setCollapsed(!0):this._setExpanded(!0)},collapse:function(){this._setCollapsed()},_setCollapsed:function(e){if(this.widgetContentContainer.is(":animated"))return;this.state.expanded=!1;const t=d(".collapse-expand-action-container",this.widget).find(".collapse-action");if(t.attr("title",t.data("collapsed-title")).toggleClass("collapsed"),e)this.widget.addClass("collapsed"),this.widgetContentContainer.slideUp("slow");else{this.trigger("collapse",this.$el,this),o.trigger("widget:dashboard:collapse:"+this.getWid(),this.$el,this);const e=this;this.widgetContentContainer.slideUp({complete:function(){e.widget.addClass("collapsed")}})}},expand:function(){this._setExpanded()},_setExpanded:function(e){if(this.widgetContentContainer.is(":animated"))return;this.state.expanded=!0;const t=d(".collapse-expand-action-container",this.widget).find(".collapse-action"),i=this.$el.find(".chart");t.attr("title",t.data("expanded-title")).toggleClass("collapsed"),this.widget.removeClass("collapsed"),e||(this.trigger("expand",this.$el,this),o.trigger("widget:dashboard:expand:"+this.getWid(),this.$el,this),this.widgetContentContainer.slideDown()),i.length>0&&i.trigger("update")},isCollapsed:function(){return!this.state.expanded},onRemoveFromDashboard:function(){const e=new n({content:i("oro.dashboard.widget.delete_confirmation")});e.on("ok",(()=>{this.trigger("removeFromDashboard",this.$el,this),o.trigger("widget:dashboard:removeFromDashboard:"+this.getWid(),this.$el,this)})),e.open()},onConfigure:function(){this.trigger("configure",this.$el,this),o.trigger("widget:dashboard:configure:"+this.getWid(),this.$el,this)},_onContentLoad:function(e){const t=d(e).data("widget-title");t&&this.setTitle(t),r.__super__._onContentLoad.call(this,e)}});return r}.apply(t,o))||(e.exports=s)},"./bundles/orodashboard/js/widget/date-range.js":(e,t,i)=>{var o;void 0===(o=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/orotranslation/js/translator.js"),n=i("./bundles/orofilter/js/filter/date-filter.js"),a=i("./bundles/oroui/js/tools.js"),d=n.extend({customChoice:{attr:[],data:-5,label:"Custom",value:-5},fieldsDataName:{datePart:"date_part",customPart:"custom_part"},domCache:null,events:{"change select":"skipOnChangeFilterTypeHandler","change .date-visual-element":"_onClickUpdateCriteria",'change select[name=date_part], input[name$="[type]"]':"onChangeFilterType",'change select[data-name$="_part"]':"onChangeFilterTypeView"},autoUpdateRangeFilterType:!1,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){d.__super__.initialize.call(this,e),e.$form.on("submit"+this.eventNamespace(),this.onSubmit.bind(this))},createDomCache:function(){this.domCache={$datePart:this.$('select[data-name="'+this.fieldsDataName.datePart+'"]'),$customPart:this.$('select[data-name="'+this.fieldsDataName.customPart+'"]'),$dateTypeCriteriaValue:this.$(this.criteriaValueSelectors.date_type)}},onSubmit:function(){const e=t.extend({},this.emptyValue,this.getValue());if(-1!==t.values(this.typeValues).indexOf(parseInt(e.type))&&!e.value.start&&!e.value.end){const e=this.getDefaultTypeValue();this.domCache.$datePart.val(e).change()}},onChangeFilterTypeView:function(e){let t=parseInt(o(e.target).val());t===this.customChoice.value&&(t=this.domCache.$customPart.val()),this.domCache.$dateTypeCriteriaValue.val(t).change(),this.applyValue()},render:function(){return d.__super__.render.call(this),this.setValue(this.value),this},dispose:function(){this.disposed||(this.domCache=null,this.options.$form.off(this.eventNamespace()),d.__super__.dispose.call(this))},changeFilterType:function(e){const i=this.el.getBoundingClientRect();d.__super__.changeFilterType.call(this,e);const o=parseInt(e,10);if(!isNaN(o)){-1===t.values(this.typeDefinedValues).indexOf(o)?this.domCache.$customPart.show():this.domCache.$customPart.hide(),"uniform"===this.domCache.$customPart.data("bound-input-widget")&&(this.domCache.$customPart.data("input-widget").refresh(),-1===t.values(this.typeDefinedValues).indexOf(o)?this.domCache.$customPart.data("input-widget").$container.show():this.domCache.$customPart.data("input-widget").$container.hide());const e=this.el.getBoundingClientRect();i.width===e.width&&i.height===e.height||this.$el.trigger("content:changed")}},getDefaultTypeValue:function(){return-1===t.pluck(this.choices,"data").indexOf(this.typeDefinedValues.all_time)?this.emptyValue.type:this.typeDefinedValues.all_time},_getParts:function(){if(!this.valueTypes)return d.__super__._getParts.call(this);const e=[],i=t.extend({},this.emptyValue,this.getValue()),n=this._getSelectedChoiceLabel("choices",i),a=this._getTemplate("fieldTemplate"),r=t.values(this.typeDefinedValues),l=t.filter(this.choices,(function(e){return-1!==r.indexOf(e.data)}));l.push(this.customChoice),e.push(a({name:"",dataName:this.fieldsDataName.datePart,choices:l,selectedChoice:-1!==r.indexOf(i.type)?i.type:this.customChoice.value,selectedChoiceLabel:n,popoverContent:s("oro.filter.date.info")}));const c=t.values(this.typeValues),u=t.filter(this.choices,(function(e){return-1!==c.indexOf(e.data)}));return e.push(a({name:"",dataName:this.fieldsDataName.customPart,choices:u,selectedChoice:i.type,selectedChoiceLabel:n})),e.push(o("<input>").attr({type:"hidden",name:this.name,value:i.type}).prop("outerHTML")),e},_appendFilter:function(e){d.__super__._appendFilter.call(this,e),this.createDomCache()},_triggerUpdate:function(e,t){a.isEqualsLoosely(e,t)||this.trigger("update")},updateValue:function(e){this.value=a.deepClone(e)},_updateDOMValue:function(){return this._writeDOMValue(this._formatRawValue(this.getValue()))},skipOnChangeFilterTypeHandler:function(){}});return d}.call(t,i,t,e))||(e.exports=o)},"./bundles/orodashboard/js/widget/datetime-range.js":(e,t,i)=>{var o;void 0===(o=function(e){"use strict";const t=i("./bundles/orofilter/js/filter/datetime-filter.js"),o=i("./bundles/oroui/js/tools.js"),s=t.extend({events:{"change .datetime-visual-element":"_onClickUpdateCriteria"},autoUpdateRangeFilterType:!1,constructor:function e(t){e.__super__.constructor.call(this,t)},render:function(){return s.__super__.render.call(this),this.setValue(this.value),this},_triggerUpdate:function(e,t){o.isEqualsLoosely(e,t)||this.trigger("update")},updateValue:function(e){this.value=o.deepClone(e)},_updateDOMValue:function(){return this._writeDOMValue(this._formatRawValue(this.getValue()))}});return s}.call(t,i,t,e))||(e.exports=o)}}]);